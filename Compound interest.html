<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>××—×©×‘×•×Ÿ ×¨×™×‘×™×ª ×“×¨×™×‘×™×ª ××ª×§×“× | SmartInvest</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&family=Outfit:wght@600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --primary: #6750A4;
            --primary-container: #EADDFF;
            --on-primary-container: #21005D;
            --background: #FDF7FF;
            --surface: #FFFFFF;
            --surface-variant: #E7E0EC;
            --on-surface: #1D1B20;
            --outline: #79747E;
            --success: #2e7d32;
            --radius-lg: 28px;
            --radius-md: 16px;
            --shadow: 0 4px 20px rgba(0,0,0,0.05);
            --font-body: 'Assistant', sans-serif;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --primary: #D0BCFF;
                --primary-container: #4F378B;
                --on-primary-container: #EADDFF;
                --background: #141218;
                --surface: #1D1B20;
                --surface-variant: #49454F;
                --on-surface: #E6E1E5;
                --outline: #938F99;
            }
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0;
            font-family: var(--font-body);
            background-color: var(--background);
            color: var(--on-surface);
            line-height: 1.6;
        }

        header {
            padding: 15px 20px;
            background: var(--surface);
            display: flex;
            align-items: center;
            justify-content: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }

        header h1 { font-size: 1.4rem; margin: 0; color: var(--primary); font-weight: 700; }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow);
            border: 1px solid var(--surface-variant);
        }

        h2 { margin-top: 0; font-size: 1.5rem; color: var(--on-surface); margin-bottom: 20px; }

        .input-group { margin-bottom: 18px; }
        
        .input-group label {
            display: block;
            font-size: 0.9rem;
            color: var(--on-surface);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .input-wrapper {
            display: flex;
            align-items: center;
            background: var(--surface-variant);
            border-radius: var(--radius-md);
            padding: 0 15px;
            transition: 0.3s;
            border: 2px solid transparent;
        }

        .input-wrapper:focus-within {
            border-color: var(--primary);
            background: var(--surface);
        }

        input[type="number"], select {
            width: 100%;
            padding: 14px 10px;
            border: none;
            background: transparent;
            font-size: 1.1rem;
            color: var(--on-surface);
            font-family: var(--font-body);
            font-weight: 600;
            outline: none;
        }

        .unit { font-weight: bold; color: var(--outline); }

        input[type=range] {
            width: 100%;
            margin-top: 10px;
            accent-color: var(--primary);
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
            font-family: var(--font-body);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary { background: var(--primary); color: white; }
        .btn-secondary { background: var(--primary-container); color: var(--on-primary-container); }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }

        /* Stats */
        .summary-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 25px;
        }

        .stat-box {
            background: var(--surface-variant);
            padding: 15px;
            border-radius: var(--radius-md);
            text-align: center;
        }

        .stat-box.total {
            grid-column: span 2;
            background: var(--primary-container);
        }

        .stat-label { font-size: 0.85rem; color: var(--outline); font-weight: 600; }
        .stat-value { font-size: 1.3rem; font-weight: 800; color: var(--on-surface); }
        .stat-box.total .stat-value { font-size: 2rem; color: var(--on-primary-container); }

        .chart-container { height: 300px; margin: 20px 0; }

        /* Table */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-md);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        th { background: var(--surface-variant); padding: 12px; text-align: right; }
        td { padding: 12px; border-bottom: 1px solid var(--surface-variant); }

        /* SEO Section Styling */
        .seo-section {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px 60px 20px;
        }
        .seo-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 32px;
            border: 1px dashed var(--outline);
            opacity: 0.9;
        }
        .seo-card h2 { color: var(--primary); border-bottom: 2px solid var(--primary-container); padding-bottom: 10px; display: inline-block; }
        .seo-card p { font-size: 1.1rem; color: var(--on-surface); margin-bottom: 20px; }
        .seo-card ul { padding-right: 20px; }
        .seo-card li { margin-bottom: 10px; font-weight: 500; }
        .highlight-text { color: var(--primary); font-weight: 700; }

    </style>
</head>
<body>

<header>
    <h1>SmartInvest | ××—×©×‘×•×Ÿ ×¨×™×‘×™×ª ×“×¨×™×‘×™×ª</h1>
</header>

<div class="container">
    <div class="card">
        <h2>× ×ª×•× ×™ ×”×©×§×¢×”</h2>
        
        <div class="input-group">
            <label>×¡×›×•× ×”×ª×—×œ×ª×™</label>
            <div class="input-wrapper">
                <span class="unit">â‚ª</span>
                <input type="number" id="initial" value="10000">
            </div>
        </div>

        <div class="input-group">
            <label>×”×¤×§×“×” ×—×•×“×©×™×ª</label>
            <div class="input-wrapper">
                <span class="unit">â‚ª</span>
                <input type="number" id="monthly" value="1000">
            </div>
        </div>

        <div class="input-group">
            <label>×¨×™×‘×™×ª ×©× ×ª×™×ª ×¦×¤×•×™×” (%)</label>
            <div class="input-wrapper">
                <input type="number" id="rate" value="7" step="0.1">
                <span class="unit">%</span>
            </div>
            <input type="range" min="1" max="20" step="0.1" value="7" oninput="document.getElementById('rate').value = this.value; calculate()">
        </div>

        <div class="input-group">
            <label>×ª×§×•×¤×” (×©× ×™×)</label>
            <div class="input-wrapper">
                <input type="number" id="years" value="15">
                <span class="unit">×©× ×™×</span>
            </div>
            <input type="range" min="1" max="50" value="15" oninput="document.getElementById('years').value = this.value; calculate()">
        </div>

        <div class="input-group">
            <label>×ª×“×™×¨×•×ª ×¦×‘×™×¨×ª ×¨×™×‘×™×ª</label>
            <div class="input-wrapper">
                <select id="compound" onchange="calculate()">
                    <option value="1">×¤×¢× ×‘×©× ×”</option>
                    <option value="4">×›×œ ×¨×‘×¢×•×Ÿ</option>
                    <option value="12" selected>×‘×›×œ ×—×•×“×©</option>
                    <option value="365">×‘×›×œ ×™×•×</option>
                </select>
            </div>
        </div>

        <button class="btn btn-primary" onclick="calculate()">×—×©×‘ ×¦××™×—×”</button>
        <button class="btn btn-secondary" style="margin-top: 12px;" onclick="exportToPDF()">ğŸ“¥ ×”×•×¨×“ ×“×•×— PDF</button>
    </div>

    <div class="card" id="report-area">
        <h2>×ª×—×–×™×ª ×¦××™×—×”</h2>

        <div class="summary-grid">
            <div class="stat-box">
                <div class="stat-label">×¡×š ×”×›×œ ×”×•×¤×§×“</div>
                <div class="stat-value" id="res-invested">â‚ª0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">×¨×•×•×— ××”×¨×™×‘×™×ª</div>
                <div class="stat-value" id="res-interest" style="color: var(--success);">â‚ª0</div>
            </div>
            <div class="stat-box total">
                <div class="stat-label">×¡×›×•× ×¡×•×¤×™ ××•×¢×¨×š</div>
                <div class="stat-value" id="res-balance">â‚ª0</div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="growthChart"></canvas>
        </div>

        <h3>×¤×™×¨×•×˜ ×œ×¤×™ ×©× ×™×</h3>
        <div class="table-container">
            <table id="breakdownTable">
                <thead>
                    <tr>
                        <th>×©× ×”</th>
                        <th>×¡×›×•× ××¦×˜×‘×¨</th>
                        <th>××–×” ×¨×™×‘×™×ª</th>
                        <th>×¡×š ×”×•×¤×§×“</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<div class="seo-section">
    <div class="seo-card">
        <h2>×œ××” ×›×“××™ ×œ×”×©×ª××© ×‘××—×©×‘×•×Ÿ ×¨×™×‘×™×ª ×“×¨×™×‘×™×ª?</h2>
        <p>×”×‘× ×ª ×”×›×•×— ×©×œ <span class="highlight-text">×¨×™×‘×™×ª ×“×¨×™×‘×™×ª</span> ×”×™× ×”×¦×¢×“ ×”×¨××©×•×Ÿ ×œ×§×¨××ª ×—×•×¤×© ×›×œ×›×œ×™. ×›×¤×™ ×©××œ×‘×¨×˜ ××™×™× ×©×˜×™×™×Ÿ ×××¨ ×¤×¢×: "×¨×™×‘×™×ª ×“×¨×™×‘×™×ª ×”×™× ×”×¤×œ× ×”×©××™× ×™ ×‘×ª×‘×œ. ××™ ×©××‘×™×Ÿ ×–××ª, ××¨×•×•×™×— ××•×ª×”... ××™ ×©×œ×, ××©×œ× ××•×ª×”."</p>
        
        <p>×›×œ×™ ××ª×§×“× ×–×” ×¢×•×–×¨ ×œ×›× ×œ×“××™×™×Ÿ ×›×™×¦×“ ×”×¤×§×“×•×ª ×§×˜× ×•×ª ×•×§×‘×•×¢×•×ª ×™×›×•×œ×•×ª ×œ×¦××•×— ×œ×”×•×Ÿ ××©××¢×•×ª×™ ×œ××•×¨×š ×–××Ÿ, ×”×•×“×•×ª ×œ××¤×§×˜ "×›×“×•×¨ ×”×©×œ×’" ×©×œ ×¨×™×‘×™×ª ×”×× ×™×‘×” ×¨×™×‘×™×ª × ×•×¡×¤×ª. ×‘×™×Ÿ ×× ××ª× ××ª×›× × ×™× ××ª ×”×¤×¨×™×©×” ×©×œ×›×, ×—×•×¡×›×™× ×œ×‘×™×ª, ××• ×‘×•× ×™× ×ª×™×§ ×”×©×§×¢×•×ª ×‘×©×•×§ ×”×”×•×Ÿ, ×”××—×©×‘×•×Ÿ ××¡×¤×§ ×ª×—×–×™×•×ª ××“×•×™×§×•×ª ×©×™×¢×–×¨×• ×œ×›× ×œ×§×‘×œ ×”×—×œ×˜×•×ª ××•×©×›×œ×•×ª.</p>

        <p><span class="highlight-text">×ª×›×•× ×•×ª ×”××¢×¨×›×ª:</span></p>
        <ul>
            <li>×•×™×–×•××œ×™×–×¦×™×” ××™×™×“×™×ª ×‘×××¦×¢×•×ª ×’×¨×£ ××™× ×˜×¨××§×˜×™×‘×™</li>
            <li>××¤×©×¨×•×ª ×œ×”×ª×××ª ×ª×“×™×¨×•×ª ×”×”×¤×§×“×•×ª ×•×”×¦×‘×™×¨×”</li>
            <li>×˜×‘×œ×ª ×¤×™×¨×•×˜ ×©× ×ª×™×ª ××¢××™×§×” ×œ×›×œ ××•×¨×š ×ª×§×•×¤×ª ×”×—×™×¡×›×•×Ÿ</li>
            <li>×”×•×¨×“×ª ×“×•×—×•×ª ×‘×¤×•×¨××˜ PDF ×œ×©××™×¨×” ×•××¢×§×‘ ××™×©×™</li>
        </ul>
    </div>
</div>

<script>
    let growthChart;

    document.addEventListener('DOMContentLoaded', () => {
        initChart();
        calculate();
    });

    function calculate() {
        const P = parseFloat(document.getElementById('initial').value) || 0;
        const PMT = parseFloat(document.getElementById('monthly').value) || 0;
        const annualRate = (parseFloat(document.getElementById('rate').value) || 0) / 100;
        const t = parseFloat(document.getElementById('years').value) || 1;
        const n = parseFloat(document.getElementById('compound').value) || 12;

        let balance = P;
        let totalInvested = P;
        
        const labels = ['×”×ª×—×œ×”'];
        const dataBalance = [P];
        const dataInvested = [P];
        const tableBody = document.querySelector('#breakdownTable tbody');
        tableBody.innerHTML = '';

        for (let year = 1; year <= t; year++) {
            for (let month = 1; month <= 12; month++) {
                balance += PMT;
                totalInvested += PMT;
                
                if (n >= 12) {
                    balance *= (1 + (annualRate / 12));
                }
            }
            
            if (n < 12) {
                let yearStartBalance = dataBalance[year-1] + (PMT * 12);
                if (n === 1) balance = yearStartBalance * (1 + annualRate);
                if (n === 4) balance = yearStartBalance * Math.pow((1 + annualRate/4), 4);
            }

            labels.push(`×©× ×” ${year}`);
            dataBalance.push(balance);
            dataInvested.push(totalInvested);

            const row = `
                <tr>
                    <td>${year}</td>
                    <td>${formatMoney(balance)}</td>
                    <td style="color:var(--success)">${formatMoney(balance - totalInvested)}</td>
                    <td>${formatMoney(totalInvested)}</td>
                </tr>
            `;
            tableBody.insertAdjacentHTML('beforeend', row);
        }

        document.getElementById('res-invested').innerText = formatMoney(totalInvested);
        document.getElementById('res-interest').innerText = formatMoney(balance - totalInvested);
        document.getElementById('res-balance').innerText = formatMoney(balance);

        updateChart(labels, dataInvested, dataBalance);
    }

    function formatMoney(num) {
        return new Intl.NumberFormat('he-IL', { style: 'currency', currency: 'ILS', maximumFractionDigits: 0 }).format(num);
    }

    function initChart() {
        const ctx = document.getElementById('growthChart').getContext('2d');
        
        growthChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: '×¡×›×•× ×¡×•×¤×™',
                        data: [],
                        borderColor: '#6750A4',
                        backgroundColor: 'rgba(103, 80, 164, 0.1)',
                        fill: true,
                        tension: 0.3,
                        pointRadius: 2
                    },
                    {
                        label: '×§×¨×Ÿ (×”×¤×§×“×•×ª)',
                        data: [],
                        borderColor: '#79747E',
                        borderDash: [5, 5],
                        fill: false,
                        tension: 0.3,
                        pointRadius: 0
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                rtl: true,
                plugins: {
                    legend: { labels: { font: { family: 'Assistant' } } }
                },
                scales: {
                    y: {
                        position: 'right',
                        ticks: {
                            callback: v => 'â‚ª' + v.toLocaleString()
                        }
                    }
                }
            }
        });
    }

    function updateChart(labels, invested, balance) {
        growthChart.data.labels = labels;
        growthChart.data.datasets[0].data = balance;
        growthChart.data.datasets[1].data = invested;
        growthChart.update();
    }

    function exportToPDF() {
        const element = document.getElementById('report-area');
        const opt = {
            margin: 10,
            filename: '×ª×•×›× ×™×ª_×”×©×§×¢×”.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, scrollY: 0 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        
        html2pdf().set(opt).from(element).save();
    }
</script>

</body>
</html>